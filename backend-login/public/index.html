<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Harshada | Register & Login</title>
<style>
  body { font-family: Arial; text-align:center; background:#f5f5f5; }
  form { background:white; margin:20px auto; width:250px; padding:15px; border-radius:8px; box-shadow:0 0 5px gray; }
  input { display:block; width:90%; margin:8px auto; padding:8px; }
  button { background:black; color:white; border:none; padding:8px; cursor:pointer; }
  #msg { color:green; margin-top:10px; }
</style>
</head>
<body>
<h2>Harshadaâ€™s Login System</h2>

<form id="registerForm">
  <h3>Register</h3>
  <input id="rname" placeholder="Name" />
  <input id="remail" placeholder="Email" />
  <input id="rpass" type="password" placeholder="Password" />
  <button type="button" onclick="register()">Sign Up</button>
</form>

<form id="loginForm">
  <h3>Login</h3>
  <input id="lemail" placeholder="Email" />
  <input id="lpass" type="password" placeholder="Password" />
  <button type="button" onclick="login()">Sign In</button>
</form>

<p id="msg"></p>

<script>
async function register() {
  const res = await fetch("http://localhost3000/signup", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({
      name: rname.value,
      email: remail.value,
      password: rpass.value
    })
  });
  const data = await res.json();
  msg.textContent = data.info;
  console.log(data);
  // store token (optional)
  localStorage.setItem("userEmail", remail.value);
}

async function login() {
  const res = await fetch("http://localhost:3000/signin", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({
      email: lemail.value,
      password: lpass.value
    })
  });
  const data = await res.json();
  msg.textContent = data.info;
  console.log(data);
  // ðŸ”¸ Save token to localStorage
  if (data.token) {
    localStorage.setItem("token", data.token);
  }
}

// âœ… Check token after refresh
window.onload = () => {
  const token = localStorage.getItem("token");
  if (token) {
    msg.textContent = "Already logged in âœ…";
    console.log("Stored token:", token);
  }
};
</script>
</body>
</html>